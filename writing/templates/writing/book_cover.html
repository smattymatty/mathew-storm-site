{% extends "A_base/base.html" %}
{% load static %}

{% block content %}
<div class="sb-container sb-mx-auto sb-py-16 sb-px-4">
    <!-- Back to Writing Dashboard -->
    <div class="sb-mb-8" data-storm="fade-in">
        <a href="{% url 'index' %}" class="sb-btn sb-btn-ghost sb-btn-sm" data-storm-hover="lift">
            ← Back to Writing
        </a>
    </div>

    <!-- Book Cover -->
    <div class="sb-max-w-4xl sb-mx-auto sb-text-center" data-storm="fade-in">
        <h1 class="sb-text-6xl sb-font-bold sb-text-primary sb-mb-4" data-storm="hero-title">
            {{ book_title }}
        </h1>
        <p class="sb-text-2xl sb-text-secondary sb-mb-8" data-storm="hero-subtitle" data-storm-delay="300">
            {{ book_subtitle }}
        </p>

        <div class="sb-prose sb-prose-lg sb-mx-auto sb-mb-12" data-storm="fade-in" data-storm-delay="600">
            <p>After millennia of pushing his boulder up a mountain, Sisyphus finds himself recruited for a new eternal task: helping to design the most perfect prison ever conceived. But as he works alongside the tormented architect, he begins to see that the labyrinth is more than just a maze—it's a living system that learns, adapts, and evolves.</p>
        </div>

        {% if chapters %}
        <a href="{% url 'read_chapter' 'labyrinth-of-sisyphus' chapters.0.slug %}"
           class="sb-btn sb-btn-primary sb-btn-lg"
           data-storm="fade-in"
           data-storm-delay="900"
           data-storm-hover="lift"
           data-storm-click="pulse">
            Begin Reading →
        </a>
        {% else %}
        <p class="sb-alert sb-alert-warning">No chapters found. Please check the content directory.</p>
        {% endif %}
    </div>

    <!-- Table of Contents -->
    <div class="sb-max-w-4xl sb-mx-auto sb-mt-16">
        <h2 class="sb-text-3xl sb-font-bold sb-mb-8 sb-text-center" data-storm="fade-in">
            Table of Contents
        </h2>

        <!-- Part One -->
        <div class="sb-mb-8" data-storm="slide-up" data-storm-delay="200">
            <h3 class="sb-text-xl sb-font-semibold sb-mb-4 sb-text-primary">Part One: The Tower</h3>
            <div class="sb-grid sb-grid-cols-1 sb-gap-3">
                {% for chapter in chapters|slice:":7" %}
                <a href="{% url 'read_chapter' 'labyrinth-of-sisyphus' chapter.slug %}"
                   class="sb-card sb-p-4 sb-flex sb-justify-between sb-items-center"
                   data-storm-hover="scale">
                    <span class="sb-font-medium">{{ chapter.title }}</span>
                    <span class="sb-text-secondary">→</span>
                </a>
                {% endfor %}
            </div>
        </div>

        <!-- Part Two -->
        <div class="sb-mb-8" data-storm="slide-up" data-storm-delay="400">
            <h3 class="sb-text-xl sb-font-semibold sb-mb-4 sb-text-primary">Part Two: The Labyrinth</h3>
            <div class="sb-grid sb-grid-cols-1 sb-gap-3">
                {% for chapter in chapters|slice:"7:12" %}
                <a href="{% url 'read_chapter' 'labyrinth-of-sisyphus' chapter.slug %}"
                   class="sb-card sb-p-4 sb-flex sb-justify-between sb-items-center"
                   data-storm-hover="scale">
                    <span class="sb-font-medium">{{ chapter.title }}</span>
                    <span class="sb-text-secondary">→</span>
                </a>
                {% endfor %}
            </div>
        </div>

        <!-- Part Three -->
        <div class="sb-mb-8" data-storm="slide-up" data-storm-delay="600">
            <h3 class="sb-text-xl sb-font-semibold sb-mb-4 sb-text-primary">Part Three: The Breaking</h3>
            <div class="sb-grid sb-grid-cols-1 sb-gap-3">
                {% for chapter in chapters|slice:"12:" %}
                <a href="{% url 'read_chapter' 'labyrinth-of-sisyphus' chapter.slug %}"
                   class="sb-card sb-p-4 sb-flex sb-justify-between sb-items-center"
                   data-storm-hover="scale">
                    <span class="sb-font-medium">{{ chapter.title }}</span>
                    <span class="sb-text-secondary">→</span>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- About -->
    <div class="sb-max-w-4xl sb-mx-auto sb-mt-16 sb-text-center" data-storm="fade-in">
        <p class="sb-text-secondary sb-italic">
            This is a work in progress. Updates and revisions ongoing.
        </p>
        <p class="sb-text-sm sb-text-muted sb-mt-4">
            For more on the philosophical underpinnings of this story, see
            <a href="/philo/humanist-absurdism/" class="sb-link">Humanist Absurdism</a>,
            <a href="/philo/techno-absurdism/" class="sb-link">Techno-Absurdism</a>, and
            <a href="/philo/neo-absurdism/" class="sb-link">Neo-Absurdism</a>.
        </p>
    </div>
</div>
{% endblock %}
