{% load static spellbook_tags %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="{% static 'A_base/main.mjs' %}" type="module"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>{% block page_title %}Mathew Storm{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}CEO of Storm Development, leader of the 80-20 Human-In-The-Loop movement, and philosophical author exploring humanity in the age of AI.{% endblock %}">
    <meta name="author" content="Mathew Storm">
    <meta property="og:title" content="Mathew Storm - Tech Philosopher">
    <meta property="og:description" content="Building the future where humans lead and AI amplifies.">
    <meta property="og:type" content="website">
    {% spellbook_styles %}
    <link rel="stylesheet" type="text/css" href="{% static 'A_base/style.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'A_base/modern.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'questions/quiz.css' %}" />
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- HTMX -->
     <script src="{% static 'A_base/htmx.min.js' %}"></script>
  </head>

  <body class="sb-bg-background sb-min-h-screen sb-flex sb-flex-col" style="font-family: 'Inter', system-ui, -apple-system, sans-serif;">
    {% include 'A_base/partials/navbar.html' %}
    
    {% if hero %}
      {% include 'A_base/partials/hero.html' %}
    {% endif %}

    <main class="sb-flex-grow sb-w-full" data-storm="fade-in">
      <div class="sb-container sb-mx-auto sb-px-4 sb-py-8 sb-lg:px-8">

        <div class="sb-grid sb-grid-cols-1 sb-lg:grid-cols-12 sb-gap-6 sb-lg:gap-8">
        
          {# Main Content Area - Professional Layout #}
          <section id="home-content" class="sb-lg:col-span-8" data-storm="slide-up" data-storm-delay="200">
          {% if metadata %}
            {# Page with metadata - show title and metadata #}
            <div class="sb-bg-surface sb-rounded-xl sb-shadow-xl sb-p-8 sb-mb-6 sb-border sb-border-subtle" data-storm="fade-in" data-storm-delay="300">
              <h1 class="sb-text-5xl sb-font-bold sb-text-primary sb-mb-6 sb-tracking-tight" style="font-weight: 800;">
                {% if metadata.title %}
                  {{ metadata.title|title }}
                {% elif metadata.namespace %}
                  {{ metadata.namespace|title }}
                {% endif %}
              </h1>
              {% include 'A_base/partials/examples/sidebar_content.html' %}
            </div>
          {% endif %}
          
          <div class="sb-bg-surface sb-rounded-xl sb-shadow-xl sb-p-8 sb-border sb-border-subtle" data-storm="fade-in" data-storm-delay="400">
            {% block content %}
            {{ content|safe }}
            {% endblock %}
          </div>
        </section>
        
          {# Professional Sidebar #}
          <aside class="sb-lg:col-span-4" data-storm="slide-left" data-storm-delay="300">
          {% if toc %}
            <div class="sb-bg-surface sb-rounded-xl sb-shadow-lg sb-p-6 sb-mb-6 sb-sticky sb-top-4 sb-border sb-border-subtle" data-storm="fade-in" data-storm-delay="500">
              <h3 class="sb-text-lg sb-font-semibold sb-text-secondary sb-mb-4 sb-uppercase sb-tracking-wider" style="font-size: 0.875rem; letter-spacing: 0.05em;">Table of Contents</h3>
              {% sidebar_toc %}
            </div>
          {% endif %}
          
          {# Professional Quick Links #}
          <div class="sb-bg-surface sb-rounded-xl sb-shadow-lg sb-p-6 sb-mb-6 sb-border sb-border-subtle" data-storm="fade-in" data-storm-delay="600">
            <h3 class="sb-text-lg sb-font-semibold sb-text-accent sb-mb-4 sb-uppercase sb-tracking-wider" style="font-size: 0.875rem; letter-spacing: 0.05em;">Navigation</h3>
            <ul class="sb-space-y-3">
              <li><a href="{% url 'projects:intro' %}" class="sb-flex sb-items-center sb-gap-3 sb-p-2 sb-rounded-lg sb-hover:bg-primary-10 sb-transition-all" data-storm-hover="scale">
                <span class="sb-text-xl">üöÄ</span>
                <span class="sb-font-medium">Projects</span>
              </a></li>
              <li><a href="{% url 'tutorials:intro' %}" class="sb-flex sb-items-center sb-gap-3 sb-p-2 sb-rounded-lg sb-hover:bg-secondary-10 sb-transition-all" data-storm-hover="scale">
                <span class="sb-text-xl">üìö</span>
                <span class="sb-font-medium">Tutorials</span>
              </a></li>
              <li><a href="{% url 'blog:intro' %}" class="sb-flex sb-items-center sb-gap-3 sb-p-2 sb-rounded-lg sb-hover:bg-accent-10 sb-transition-all" data-storm-hover="scale">
                <span class="sb-text-xl">‚úçÔ∏è</span>
                <span class="sb-font-medium">Blog</span>
              </a></li>
              <li><a href="{% url 'notes:intro' %}" class="sb-flex sb-items-center sb-gap-3 sb-p-2 sb-rounded-lg sb-hover:bg-warning-10 sb-transition-all" data-storm-hover="scale">
                <span class="sb-text-xl">üìù</span>
                <span class="sb-font-medium">Notes</span>
              </a></li>
              <li><a href="{% url 'philo:intro' %}" class="sb-flex sb-items-center sb-gap-3 sb-p-2 sb-rounded-lg sb-hover:bg-emphasis-10 sb-transition-all" data-storm-hover="scale">
                <span class="sb-text-xl">üß†</span>
                <span class="sb-font-medium">Philosophy</span>
              </a></li>
            </ul>
          </div>
          
          {# Professional Status Widget #}
          <div class="sb-bg-gradient-to-br sb-from-accent-25 sb-to-primary-25 sb-rounded-xl sb-shadow-lg sb-p-6 sb-border sb-border-accent-50" data-storm="fade-in" data-storm-delay="700">
            <h3 class="sb-text-lg sb-font-semibold sb-text-emphasis sb-mb-4 sb-uppercase sb-tracking-wider" style="font-size: 0.875rem; letter-spacing: 0.05em;">Current Focus</h3>
            <ul class="sb-space-y-3">
              <li class="sb-flex sb-items-center sb-gap-3 sb-p-2 sb-rounded-lg sb-bg-background-50">
                <span class="sb-text-xl">‚ö°</span>
                <div>
                  <p class="sb-font-medium sb-text-sm">Django Spellbook</p>
                  <p class="sb-text-xs sb-text-secondary">Open Source Framework</p>
                </div>
              </li>
              <li class="sb-flex sb-items-center sb-gap-3 sb-p-2 sb-rounded-lg sb-bg-background-50">
                <span class="sb-text-xl">üéì</span>
                <div>
                  <p class="sb-font-medium sb-text-sm">C Programming</p>
                  <p class="sb-text-xs sb-text-secondary">Seneca Polytechnic</p>
                </div>
              </li>
              <li class="sb-flex sb-items-center sb-gap-3 sb-p-2 sb-rounded-lg sb-bg-background-50">
                <span class="sb-text-xl">ü¶£</span>
                <div>
                  <p class="sb-font-medium sb-text-sm">Digital Sovereignty</p>
                  <p class="sb-text-xs sb-text-secondary">Mastodon Advocacy</p>
                </div>
              </li>
            </ul>
          </div>
        </aside>
        
        </div>
      </div>
    </main>

    {% include 'A_base/partials/footer.html' %}
    
    <!-- Storm System Animation Library -->
    <script type="module">
        import StormAnimations from '{% static "A_base/storm/storm-animations.mjs" %}';
        import StormEvents from '{% static "A_base/storm/storm-events.mjs" %}';
        
        // Mobile-specific animation fix
        if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
            // On mobile, ensure animations trigger after everything loads
            window.addEventListener('load', () => {
                setTimeout(() => {
                    // Re-check all storm elements for animation
                    document.querySelectorAll('[data-storm]').forEach(el => {
                        if (!el.classList.contains('storm-animate')) {
                            const rect = el.getBoundingClientRect();
                            if (rect.top < window.innerHeight && rect.bottom > 0) {
                                el.classList.add('storm-animate');
                            }
                        }
                    });
                }, 300);
            });
        }
    </script>

  </body>
</html>
