{% load static spellbook_tags %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>{{ page_title|default:"Mathew Storm - Building Sovereign Infrastructure" }}</title>
    <link rel="icon" type="image/png" href="{% static 'A_base/favicon.png' %}">
    <meta name="description" content="{{ meta_description|default:'Founder building Storm Cloud Server, Django Spellbook, and Django Mercury. Open source engineer focused on federated infrastructure and digital sovereignty.' }}">
    <meta name="author" content="Mathew Storm">
    <meta name="keywords" content="{{ meta_keywords|default:'mathew storm, storm cloud server, django spellbook, federated infrastructure, digital sovereignty, activitypub, django developer' }}">
    <meta property="og:title" content="{{ page_title|default:'Mathew Storm - Building Sovereign Infrastructure' }}">
    <meta property="og:description" content="{{ meta_description|default:'Founder building federated infrastructure. Storm Cloud Server, Django Spellbook, Django Mercury.' }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mathewstorm.ca{{ request.path }}">
    <meta property="og:site_name" content="Mathew Storm">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{{ page_title|default:'Mathew Storm - Building Sovereign Infrastructure' }}">
    <meta name="twitter:description" content="{{ meta_description|default:'Founder building federated infrastructure.' }}"
    {% block extra_head %}{% endblock %}
    
    <!-- Django Spellbook Styles -->
    {% spellbook_styles %}
    
    <!-- Minimal Custom Styles -->
    <link rel="stylesheet" type="text/css" href="{% static 'A_base/minimal.css' %}" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet" />
    
    <!-- HTMX -->
    <script src="{% static 'A_base/htmx.min.js' %}"></script>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Mathew Storm",
      "alternateName": "smattymatty",
      "url": "https://mathewstorm.ca",
      "sameAs": [
        "https://github.com/smattymatty",
        "https://techhub.social/@smattymatty",
        "https://northtube.ca"
      ],
      "jobTitle": "Software Engineer",
      "worksFor": {
        "@type": "Organization",
        "name": "Storm Developments"
      },
      "description": "Founder building Storm Cloud Server, Django Spellbook, and Django Mercury. Open source engineer focused on federated infrastructure.",
      "knowsAbout": [
        "Django Framework",
        "Python Development",
        "Federated Systems",
        "ActivityPub",
        "Digital Sovereignty",
        "Self-Hosted Infrastructure"
      ],
      "nationality": {
        "@type": "Country",
        "name": "Canada"
      }
    }
    </script>
  </head>

  <body class="sb-bg-background sb-min-h-screen sb-flex sb-flex-col" style="font-family: 'Inter', system-ui, -apple-system, sans-serif;">
    {% include 'A_base/partials/navbar.html' %}

    <main class="sb-flex-grow sb-w-full sb-text-text" data-storm="fade-in">
      <div class="content-wrapper">
        {% block content %}
        {{ content|safe }}
        {% endblock %}
      </div>
    </main>

    {% include 'A_base/partials/footer.html' %}
    
    <!-- Storm System Animation Library -->
    <script type="module">
        import StormAnimations from '{% static "A_base/storm/storm-animations.mjs" %}';
        import StormEvents from '{% static "A_base/storm/storm-events.mjs" %}';
        import StormHeroLightningPlugin from '{% static "A_base/storm/plugins/storm-hero-lightning.mjs" %}';
        
        // Initialize Hero Lightning Plugin
        if (StormHeroLightningPlugin && StormEvents) {
            StormHeroLightningPlugin.init(StormEvents);
        }
    </script>

  </body>
</html>
