<header style="margin: 0; padding: 0;">
    <nav class="sb-bg-surface sb-shadow-xl sb-relative" style="z-index: 9999; margin: 0;" data-storm="slide-down">
      <div class="sb-container sb-mx-auto sb-px-4 sb-sm:px-6 sb-py-4">
        <div class="sb-flex sb-justify-between sb-items-center">
          
          {# Logo/Name with Storm emoji #}
          <a href="{% url 'base:index' %}" 
             class="sb-flex sb-items-center sb-gap-2 sb-group"
             data-storm="fade-in" 
             data-storm-delay="100">
            <span class="sb-text-3xl sb-group-hover:animate-spin" data-storm-hover="rotate">üå©Ô∏è</span>
            <span class="sb-text-2xl sb-font-bold sb-text-primary sb-group-hover:text-accent sb-transition-colors">
              Mathew Storm
            </span>
          </a>
          
          {# Desktop Navigation #}
          <div class="sb-hidden sb-md:flex sb-items-center sb-gap-6">
            {# Main Nav Links with better styling #}
            <div class="sb-flex sb-gap-2" data-storm="fade-in" data-storm-delay="200">
              <a href="{% url 'projects:intro' %}" 
                 class="sb-px-4 sb-py-2 sb-rounded-full sb-font-semibold sb-transition-all
                        {% if metadata.namespace == 'projects' %}sb-bg-primary sb-text-white sb-shadow-lg{% else %}sb-text-text sb-hover:bg-primary-10 sb-hover:text-primary{% endif %}"
                 data-storm-hover="lift">
                Projects
              </a>
              <a href="{% url 'tutorials:intro' %}" 
                 class="sb-px-4 sb-py-2 sb-rounded-full sb-font-semibold sb-transition-all
                        {% if metadata.namespace == 'tutorials' %}sb-bg-secondary sb-text-white sb-shadow-lg{% else %}sb-text-text sb-hover:bg-secondary-10 sb-hover:text-secondary{% endif %}"
                 data-storm-hover="lift">
                Tutorials
              </a>
              <a href="{% url 'blog:intro' %}" 
                 class="sb-px-4 sb-py-2 sb-rounded-full sb-font-semibold sb-transition-all
                        {% if metadata.namespace == 'blog' %}sb-bg-accent sb-text-white sb-shadow-lg{% else %}sb-text-text sb-hover:bg-accent-10 sb-hover:text-accent{% endif %}"
                 data-storm-hover="lift">
                Blog
              </a>
              <a href="{% url 'philo:intro' %}" 
                 class="sb-px-4 sb-py-2 sb-rounded-full sb-font-semibold sb-transition-all
                        {% if metadata.namespace == 'philo' %}sb-bg-warning sb-text-white sb-shadow-lg{% else %}sb-text-text sb-hover:bg-warning-10 sb-hover:text-warning{% endif %}"
                 data-storm-hover="lift">
                Philosophy
              </a>
            </div>
            
            {# Separator #}
            <div class="sb-h-6 sb-w-px sb-bg-neutral-50"></div>
            
            {# Social Links with better hover effects #}
            <div class="sb-flex sb-gap-3" data-storm="fade-in" data-storm-delay="300">
              <a href="https://github.com/smattymatty" 
                 class="sb-p-2.5 sb-rounded-full sb-bg-background sb-text-text sb-hover:bg-primary sb-hover:text-white sb-transition-all sb-shadow-md sb-hover:shadow-lg"
                 title="GitHub"
                 data-storm-hover="rotate"
                 data-storm-click="bounce">
                <svg class="sb-w-5 sb-h-5" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.44 9.82 8.21 11.41.6.11.82-.26.82-.58v-2.03c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.33-1.76-1.33-1.76-1.09-.74.08-.73.08-.73 1.2.09 1.84 1.24 1.84 1.24 1.07 1.83 2.81 1.3 3.49.99.11-.77.42-1.3.76-1.6-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.13-.3-.54-1.52.12-3.18 0 0 1.01-.32 3.3 1.23.96-.27 1.98-.4 3-.4s2.04.13 3 .4c2.29-1.55 3.3-1.23 3.3-1.23.66 1.66.25 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.81 5.63-5.48 5.92.43.37.81 1.1.81 2.22v3.29c0 .32.22.69.82.57A12 12 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
                </svg>
              </a>
              <a href="https://techhub.social/@smattymatty" 
                 class="sb-p-2.5 sb-rounded-full sb-bg-background sb-text-text sb-hover:bg-secondary sb-hover:text-white sb-transition-all sb-shadow-md sb-hover:shadow-lg"
                 title="Mastodon"
                 data-storm-hover="rotate"
                 data-storm-click="bounce">
                <svg class="sb-w-5 sb-h-5" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/>
                </svg>
              </a>
              <a href="https://www.youtube.com/@MatHEWStorm" 
                 class="sb-p-2.5 sb-rounded-full sb-bg-background sb-text-text sb-hover:bg-error sb-hover:text-white sb-transition-all sb-shadow-md sb-hover:shadow-lg"
                 title="YouTube"
                 data-storm-hover="rotate"
                 data-storm-click="bounce">
                <svg class="sb-w-5 sb-h-5" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                </svg>
              </a>
            </div>
            
            {# Theme Toggle with better styling #}
            <button 
              id="theme-toggle"
              class="sb-p-2.5 sb-rounded-full sb-bg-accent sb-text-white sb-hover:bg-warning sb-transition-all sb-shadow-md sb-hover:shadow-lg"
              hx-post="{% url 'base:toggle_theme' %}"
              hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
              hx-swap="none"
              hx-trigger="click"
              title="Toggle dark/light mode"
              aria-label="Toggle between dark and light mode"
              data-storm-hover="rotate"
              data-storm-click="spin">
              {% if request.theme_mode == 'dark' %}
                {# Sun icon for dark mode (switch to light) #}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="5"></circle>
                  <line x1="12" y1="1" x2="12" y2="3"></line>
                  <line x1="12" y1="21" x2="12" y2="23"></line>
                  <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                  <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                  <line x1="1" y1="12" x2="3" y2="12"></line>
                  <line x1="21" y1="12" x2="23" y2="12"></line>
                  <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                  <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
              {% else %}
                {# Moon icon for light mode (switch to dark) #}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
              {% endif %}
            </button>
          </div>
          
          {# Mobile Menu Button with better animations #}
          <button id="mobile-menu-btn"
                  class="sb-md:hidden sb-p-2 sb-rounded-lg sb-bg-primary-25 sb-text-primary sb-relative"
                  onclick="toggleMobileMenu()"
                  data-storm-hover="scale"
                  data-storm-click="rotate">
            <div class="hamburger-icon" data-storm="fade-in">
              <span class="hamburger-line"></span>
              <span class="hamburger-line"></span>
              <span class="hamburger-line"></span>
            </div>
          </button>
        </div>
        
        {# Mobile Menu with Storm animations #}
        <div id="mobile-menu" 
             class="sb-hidden sb-md:hidden sb-mt-4 sb-pb-4 sb-absolute sb-left-0 sb-right-0 sb-top-full sb-bg-surface sb-shadow-xl sb-border-t sb-border-primary-25"
             style="z-index: 9999;"
             data-storm="slide-down"
             data-storm-replayable="true"
             data-storm-delay="100">
          <div class="sb-flex sb-flex-col sb-gap-2 sb-px-4">
            <a href="{% url 'projects:intro' %}" 
               class="sb-px-4 sb-py-3 sb-rounded-lg sb-text-text sb-hover:bg-primary-25 sb-transition-all"
               data-storm="slide-right"
               data-storm-replayable="true"
               data-storm-delay="150"
               data-storm-hover="lift">Projects</a>
            <a href="{% url 'tutorials:intro' %}" 
               class="sb-px-4 sb-py-3 sb-rounded-lg sb-text-text sb-hover:bg-secondary-25 sb-transition-all"
               data-storm="slide-right"
               data-storm-replayable="true"
               data-storm-delay="200"
               data-storm-hover="lift">Tutorials</a>
            <a href="{% url 'blog:intro' %}" 
               class="sb-px-4 sb-py-3 sb-rounded-lg sb-text-text sb-hover:bg-accent-25 sb-transition-all"
               data-storm="slide-right"
               data-storm-replayable="true"
               data-storm-delay="250"
               data-storm-hover="lift">Blog</a>
            <a href="{% url 'philo:intro' %}" 
               class="sb-px-4 sb-py-3 sb-rounded-lg sb-text-text sb-hover:bg-warning-25 sb-transition-all"
               data-storm="slide-right"
               data-storm-replayable="true"
               data-storm-delay="300"
               data-storm-hover="lift">Philosophy</a>
            <div class="sb-border-t sb-border-neutral-50 sb-my-2"></div>
            <div class="sb-flex sb-gap-4 sb-justify-center"
                 data-storm="fade-in"
                 data-storm-replayable="true"
                 data-storm-delay="300">
              <a href="https://github.com/smattymatty" 
                 class="sb-text-primary sb-hover:text-primary-75 sb-transition-colors"
                 data-storm-hover="scale"
                 data-storm-click="bounce">GitHub</a>
              <a href="https://techhub.social/@smattymatty" 
                 class="sb-text-secondary sb-hover:text-secondary-75 sb-transition-colors"
                 data-storm-hover="scale"
                 data-storm-click="bounce">Mastodon</a>
              <a href="https://www.youtube.com/@MatHEWStorm" 
                 class="sb-text-error sb-hover:text-error-75 sb-transition-colors"
                 data-storm-hover="scale"
                 data-storm-click="bounce">YouTube</a>
            </div>
          </div>
        </div>
        
      </div>
    </nav>
    
    {# Mastodon Banner - Clickable with hover effects #}
    <a href="https://techhub.social/@smattymatty" 
       class="sb-block sb-text-white sb-py-2 sb-px-4 sb-transition-all sb-duration-200 sb-cursor-pointer mastodon-banner"
       style="background-color: #17063B;" 
       data-storm="slide-down" 
       data-storm-delay="200"
       data-storm-hover="lift"
       data-storm-click="pulse">
      <div class="sb-container sb-mx-auto sb-flex sb-items-center sb-justify-center sb-gap-3 sb-sm:gap-4">
        <img src="https://assets.streamlinehq.com/image/private/w_300,h_300,ar_1/f_auto/v1/icons/logo/logo-mastodon-z8j7g1zbjug15dahcy18e.png/logo-mastodon-by888zek14vvattiebnao.png?_a=DATAg1AAZAA0" 
             alt="Mastodon logo" 
             class="sb-w-6 sb-h-6 sb-sm:w-7 sb-sm:h-7"
             style="filter: brightness(0) invert(1);"
             data-storm="fade-in" 
             data-storm-delay="300">
        <span class="sb-text-sm sb-sm:text-base sb-font-bold" data-storm="fade-in" data-storm-delay="400">
          Join the Digital Sovereignty Movement on Mastodon!
        </span>
        <svg class="sb-w-5 sb-h-5" viewBox="0 0 24 24" fill="currentColor" data-storm="fade-in" data-storm-delay="500">
          <path d="M4.5 19L19.5 5M19.5 5L8.5 5M19.5 5L19.5 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
        </svg>
      </div>
    </a>
    
    <style>
      .mastodon-banner:hover {
        background-color: #2a0e5e !important; /* Slightly brighter purple */
        padding-top: 0.75rem; /* Increased from 0.5rem (py-2) */
        padding-bottom: 0.75rem;
      }
    </style>
  </header>

<style>
/* Reset any browser defaults that might cause spacing */
body {
  margin: 0 !important;
  padding: 0 !important;
}

/* Hamburger animation styles */
.hamburger-icon {
  width: 24px;
  height: 20px;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.hamburger-line {
  display: block;
  height: 3px;
  width: 100%;
  background: currentColor;
  border-radius: 2px;
  transition: all 0.3s ease;
  transform-origin: center;
}

#mobile-menu-btn.menu-open .hamburger-line:nth-child(1) {
  transform: translateY(8.5px) rotate(45deg);
}

#mobile-menu-btn.menu-open .hamburger-line:nth-child(2) {
  opacity: 0;
  transform: scaleX(0);
}

#mobile-menu-btn.menu-open .hamburger-line:nth-child(3) {
  transform: translateY(-8.5px) rotate(-45deg);
}

/* Ensure mobile menu doesn't overflow on tiny screens */
@media (max-width: 380px) {
  .sb-text-2xl {
    font-size: 1.25rem !important;
  }
  
  #mobile-menu-btn {
    padding: 0.375rem !important;
  }
}
</style>

<script>
function toggleMobileMenu() {
  const menu = document.getElementById('mobile-menu');
  const btn = document.getElementById('mobile-menu-btn');
  
  // Toggle menu visibility with animation
  if (menu.classList.contains('sb-hidden')) {
    menu.classList.remove('sb-hidden');
    btn.classList.add('menu-open');
    
    // Use Storm API to re-animate menu items
    if (window.storm && window.storm.reAnimateElement) {
      // Re-animate the menu container itself
      window.storm.reAnimateElement(menu);
      
      // Re-animate each menu item with staggered delay
      const menuItems = menu.querySelectorAll('[data-storm-replayable="true"]');
      menuItems.forEach((item) => {
        window.storm.reAnimateElement(item);
      });
    } else {
      // Fallback if Storm isn't loaded yet
      console.warn('Storm animation system not ready');
    }
  } else {
    menu.classList.add('sb-hidden');
    btn.classList.remove('menu-open');
  }
}

// Close menu when clicking outside
document.addEventListener('click', function(event) {
  const menu = document.getElementById('mobile-menu');
  const btn = document.getElementById('mobile-menu-btn');
  
  if (!menu.contains(event.target) && !btn.contains(event.target)) {
    menu.classList.add('sb-hidden');
    btn.classList.remove('menu-open');
  }
});
</script>